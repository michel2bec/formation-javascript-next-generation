const fs = require('fs');
const path = require('path');
const chalk = require('chalk');
const config = require('../config');

// utils
const create = require('../utils/create');
const templatesPath = path.join(__dirname, '..', 'templates/');

module.exports = function(cmd) {
  console.log(cmd);
  const extension = config.extensions[cmd.extension];
  const outputDir = cmd.folder || 'src';
  let fileName;

  // Check if componentName is provided
  if (!cmd.component) {
    console.log(chalk.red(`Sorry, you need to specify a name for your component like this: creact gen -c [name]`));
    process.exit(0);
  } else {
    fileName = cmd.component + extension;
  }

  if (extension) {
    let templatePath = `${templatesPath}component`;
    return create(outputDir, fileName, templatePath);
  } else {
    console.log(
      chalk.red(
        `Sorry, you need to specify an extesion for your component like this: creact gen -x [extension] => ${chalk.yellow(
          'typescript | javascript | jsx',
        )}`,
      ),
    );
    process.exit(0);
  }
};
